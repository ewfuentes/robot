
load("@rules_foreign_cc//foreign_cc:defs.bzl", "cmake")

filegroup(
  name = "sophus_sources",
  srcs = [
     "CMakeLists.txt",
     "SophusConfig.cmake.in",
     "sophus/average.hpp",
     "sophus/cartesian.hpp",
     "sophus/ceres_local_parameterization.hpp",
     "sophus/common.hpp",
     "sophus/geometry.hpp",
     "sophus/interpolate.hpp",
     "sophus/interpolate_details.hpp",
     "sophus/num_diff.hpp",
     "sophus/rotation_matrix.hpp",
     "sophus/rxso2.hpp",
     "sophus/rxso3.hpp",
     "sophus/se2.hpp",
     "sophus/se3.hpp",
     "sophus/sim2.hpp",
     "sophus/sim3.hpp",
     "sophus/sim_details.hpp",
     "sophus/so2.hpp",
     "sophus/so3.hpp",
     "sophus/spline.hpp",
     "sophus/types.hpp",
     "sophus/velocities.hpp",

     # Even if we disable building tests and examples, these files still need to be visible.
     "sophus/test_macros.hpp",
     "sophus/example_ensure_handler.cpp",
  ]
)

cmake(
  name = "liegroups",
  install = False,
  lib_source = ":sophus_sources",
  visibility = ["//visibility:public"],
  cache_entries = {
    "SOPHUS_USE_BASIC_LOGGING": "ON",
    "BUILD_SOPHUS_TESTS": "OFF",
    "BUILD_SOPHUS_EXAMPLES": "OFF",
  }
)

 #cc_library(
 #  name = "liegroups",
 #  visibility=["//visibility:public"],
 #  hdrs = [
 #    "sophus/so2.hpp",
 #    "sophus/so3.hpp",
 #    "sophus/se2.hpp",
 #    "sophus/se3.hpp",
 #    "sophus/sim3.hpp",
 #    "sophus/sim2.hpp",
 #  ],
 #  srcs = [
 #    "sophus/common.hpp",
 #    "sophus/rotation_matrix.hpp",
 #    "sophus/types.hpp",
 #    "sophus/rxso3.hpp",
 #    "sophus/sim_details.hpp",
 #  ],
 #  defines=["SOPHUS_USE_BASIC_LOGGING"],
 #  deps = ["@eigen//:eigen"],
 #)
