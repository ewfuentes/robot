
cc_library(
  name = "triangle",
  hdrs = ["third_party/triangle/include/triangle/triangle.h"],
  srcs = ["third_party/triangle/src/triangle.c"],
  strip_include_prefix="third_party/triangle/include"
)


cc_library(
  name = "kimera_vio",
  hdrs = [
      "include/kimera-vio/backend/RegularVioBackend-definitions.h",
      "include/kimera-vio/backend/RegularVioBackend.h",
      "include/kimera-vio/backend/RegularVioBackendParams.h",
      "include/kimera-vio/backend/VioBackend-definitions.h",
      "include/kimera-vio/backend/VioBackendFactory.h",
      "include/kimera-vio/backend/VioBackend.h",
      "include/kimera-vio/backend/VioBackendModule.h",
      "include/kimera-vio/backend/VioBackendParams.h",
      "include/kimera-vio/common/VioNavState.h",
      "include/kimera-vio/common/vio_types.h",
      "include/kimera-vio/dataprovider/DataProviderInterface-definitions.h",
      "include/kimera-vio/dataprovider/DataProviderInterface.h",
      "include/kimera-vio/dataprovider/DataProviderModule.h",
      "include/kimera-vio/dataprovider/EurocDataProvider.h",
      "include/kimera-vio/dataprovider/KittiDataProvider.h",
      "include/kimera-vio/dataprovider/MonoDataProviderModule.h",
      "include/kimera-vio/dataprovider/RgbdDataProviderModule.h",
      "include/kimera-vio/dataprovider/StereoDataProviderModule.h",
      "include/kimera-vio/factors/ParallelPlaneRegularFactor.h",
      "include/kimera-vio/factors/PointPlaneFactor.h",
      "include/kimera-vio/frontend/Camera.h",
      "include/kimera-vio/frontend/CameraParams.h",
      "include/kimera-vio/frontend/DepthFrame.h",
      "include/kimera-vio/frontend/feature-detector/anms/anms.h",
      "include/kimera-vio/frontend/feature-detector/anms/nanoflann.hpp",
      "include/kimera-vio/frontend/feature-detector/anms/range-tree/lrtypes.h",
      "include/kimera-vio/frontend/feature-detector/anms/range-tree/ranget.h",
      "include/kimera-vio/frontend/feature-detector/FeatureDetector-definitions.h",
      "include/kimera-vio/frontend/feature-detector/FeatureDetector.h",
      "include/kimera-vio/frontend/feature-detector/FeatureDetectorParams.h",
      "include/kimera-vio/frontend/feature-detector/NonMaximumSuppression.h",
      "include/kimera-vio/frontend/Frame.h",
      "include/kimera-vio/frontend/FrontendInputPacketBase.h",
      "include/kimera-vio/frontend/FrontendOutputPacketBase.h",
      "include/kimera-vio/frontend/FrontendType.h",
      "include/kimera-vio/frontend/MonoImuSyncPacket.h",
      "include/kimera-vio/frontend/MonoVisionImuFrontend-definitions.h",
      "include/kimera-vio/frontend/MonoVisionImuFrontend.h",
      "include/kimera-vio/frontend/OdometryParams.h",
      "include/kimera-vio/frontend/optical-flow/OpticalFlowPredictor-definitions.h",
      "include/kimera-vio/frontend/optical-flow/OpticalFlowPredictorFactory.h",
      "include/kimera-vio/frontend/optical-flow/OpticalFlowPredictor.h",
      "include/kimera-vio/frontend/optical-flow/OpticalFlowVisualizer.h",
      "include/kimera-vio/frontend/RgbdCamera.h",
      "include/kimera-vio/frontend/RgbdFrame.h",
      "include/kimera-vio/frontend/RgbdImuSyncPacket.h",
      "include/kimera-vio/frontend/RgbdVisionImuFrontend-definitions.h",
      "include/kimera-vio/frontend/RgbdVisionImuFrontend.h",
      "include/kimera-vio/frontend/StereoCamera.h",
      "include/kimera-vio/frontend/StereoFrame-definitions.h",
      "include/kimera-vio/frontend/StereoFrame.h",
      "include/kimera-vio/frontend/StereoImuSyncPacket.h",
      "include/kimera-vio/frontend/StereoMatcher.h",
      "include/kimera-vio/frontend/StereoMatchingParams.h",
      "include/kimera-vio/frontend/StereoVisionImuFrontend-definitions.h",
      "include/kimera-vio/frontend/StereoVisionImuFrontend.h",
      "include/kimera-vio/frontend/Tracker-definitions.h",
      "include/kimera-vio/frontend/Tracker.h",
      "include/kimera-vio/frontend/UndistorterRectifier.h",
      "include/kimera-vio/frontend/VisionImuFrontend-definitions.h",
      "include/kimera-vio/frontend/VisionImuFrontendFactory.h",
      "include/kimera-vio/frontend/VisionImuFrontend.h",
      "include/kimera-vio/frontend/VisionImuFrontendModule.h",
      "include/kimera-vio/frontend/VisionImuFrontendParams.h",
      "include/kimera-vio/frontend/VisionImuTrackerParams.h",
      "include/kimera-vio/imu-frontend/ImuFrontend-definitions.h",
      "include/kimera-vio/imu-frontend/ImuFrontend.h",
      "include/kimera-vio/imu-frontend/ImuFrontendParams.h",
      "include/kimera-vio/initial/CrossCorrTimeAligner.h",
      "include/kimera-vio/initial/InitializationBackend-definitions.h",
      "include/kimera-vio/initial/InitializationBackend.h",
      "include/kimera-vio/initial/InitializationFromImu.h",
      "include/kimera-vio/initial/OnlineGravityAlignment-definitions.h",
      "include/kimera-vio/initial/OnlineGravityAlignment.h",
      "include/kimera-vio/initial/RingBuffer.h",
      "include/kimera-vio/initial/TimeAlignerBase.h",
      "include/kimera-vio/logging/Logger.h",
      "include/kimera-vio/loopclosure/FrameCache.h",
      "include/kimera-vio/loopclosure/LcdFactory.h",
      "include/kimera-vio/loopclosure/LcdModule.h",
      "include/kimera-vio/loopclosure/LcdOutputPacket.h",
      "include/kimera-vio/loopclosure/LcdThirdPartyWrapper.h",
      "include/kimera-vio/loopclosure/LoopClosureDetector-definitions.h",
      "include/kimera-vio/loopclosure/LoopClosureDetector.h",
      "include/kimera-vio/loopclosure/LoopClosureDetectorParams.h",
      "include/kimera-vio/mesh/Mesher_cgal.h",
      "include/kimera-vio/mesh/Mesher-definitions.h",
      "include/kimera-vio/mesh/MesherFactory.h",
      "include/kimera-vio/mesh/Mesher.h",
      "include/kimera-vio/mesh/MesherModule.h",
      "include/kimera-vio/mesh/Mesh.h",
      "include/kimera-vio/mesh/MeshOptimization-definitions.h",
      "include/kimera-vio/mesh/MeshOptimization.h",
      "include/kimera-vio/mesh/MeshUtils.h",
      "include/kimera-vio/pipeline/MonoImuPipeline.h",
      "include/kimera-vio/pipeline/Pipeline-definitions.h",
      "include/kimera-vio/pipeline/Pipeline.h",
      "include/kimera-vio/pipeline/PipelineModule.h",
      "include/kimera-vio/pipeline/PipelineParams.h",
      "include/kimera-vio/pipeline/PipelinePayload.h",
      "include/kimera-vio/pipeline/QueueSynchronizer.h",
      "include/kimera-vio/pipeline/RgbdImuPipeline.h",
      "include/kimera-vio/pipeline/StereoImuPipeline.h",
      "include/kimera-vio/playground/EurocPlayground.h",
      "include/kimera-vio/utils/Accumulator.h",
      "include/kimera-vio/utils/FilesystemUtils.h",
      "include/kimera-vio/utils/GtsamPrinting.h",
      "include/kimera-vio/utils/Histogram.h",
      "include/kimera-vio/utils/Macros.h",
      "include/kimera-vio/utils/Statistics.h",
      "include/kimera-vio/utils/ThreadsafeImuBuffer.h",
      "include/kimera-vio/utils/ThreadsafeImuBuffer-inl.h",
      "include/kimera-vio/utils/ThreadsafeOdometryBuffer.h",
      "include/kimera-vio/utils/ThreadsafeQueue.h",
      "include/kimera-vio/utils/ThreadsafeTemporalBuffer.h",
      "include/kimera-vio/utils/ThreadsafeTemporalBuffer-inl.h",
      "include/kimera-vio/utils/Timer.h",
      "include/kimera-vio/utils/UtilsGeometry.h",
      "include/kimera-vio/utils/UtilsGTSAM.h",
      "include/kimera-vio/utils/UtilsNumerical.h",
      "include/kimera-vio/utils/UtilsOpenCV.h",
      "include/kimera-vio/utils/YamlParser.h",
      "include/kimera-vio/visualizer/Display-definitions.h",
      "include/kimera-vio/visualizer/DisplayFactory.h",
      "include/kimera-vio/visualizer/Display.h",
      "include/kimera-vio/visualizer/DisplayModule.h",
      "include/kimera-vio/visualizer/DisplayParams.h",
      "include/kimera-vio/visualizer/OpenCvDisplay.h",
      "include/kimera-vio/visualizer/OpenCvDisplayParams.h",
      "include/kimera-vio/visualizer/OpenCvVisualizer3D.h",
      # "include/kimera-vio/visualizer/PangolinDisplay.h",
      "include/kimera-vio/visualizer/Visualizer3D-definitions.h",
      "include/kimera-vio/visualizer/Visualizer3DFactory.h",
      "include/kimera-vio/visualizer/Visualizer3D.h",
      "include/kimera-vio/visualizer/Visualizer3DModule.h",
  ],
  srcs = [
      # "src/backend/FactorGraphManagement.cpp",
      "src/backend/RegularVioBackend.cpp",
      "src/backend/RegularVioBackendParams.cpp",
      "src/backend/VioBackend.cpp",
      "src/backend/VioBackendModule.cpp",
      "src/backend/VioBackendParams.cpp",
      "src/common/VioNavState.cpp",
      "src/dataprovider/DataProviderInterface.cpp",
      "src/dataprovider/DataProviderInterface-definitions.cpp",
      "src/dataprovider/DataProviderModule.cpp",
      "src/dataprovider/EurocDataProvider.cpp",
      "src/dataprovider/KittiDataProvider.cpp",
      "src/dataprovider/MonoDataProviderModule.cpp",
      "src/dataprovider/RgbdDataProviderModule.cpp",
      "src/dataprovider/StereoDataProviderModule.cpp",
      "src/factors/ParallelPlaneRegularFactor.cpp",
      "src/factors/PointPlaneFactor.cpp",
      "src/frontend/Camera.cpp",
      "src/frontend/CameraParams.cpp",
      "src/frontend/DepthFrame.cpp",
      "src/frontend/feature-detector/anms/anms.cpp",
      "src/frontend/feature-detector/FeatureDetector.cpp",
      "src/frontend/feature-detector/FeatureDetectorParams.cpp",
      "src/frontend/feature-detector/NonMaximumSuppression.cpp",
      "src/frontend/MonoImuSyncPacket.cpp",
      "src/frontend/MonoVisionImuFrontend.cpp",
      "src/frontend/OdometryParams.cpp",
      "src/frontend/optical-flow/OpticalFlowPredictor.cpp",
      "src/frontend/RgbdCamera.cpp",
      "src/frontend/RgbdFrame.cpp",
      "src/frontend/RgbdImuSyncPacket.cpp",
      "src/frontend/RgbdVisionImuFrontend.cpp",
      "src/frontend/StereoCamera.cpp",
      "src/frontend/StereoFrame.cpp",
      "src/frontend/StereoImuSyncPacket.cpp",
      "src/frontend/StereoMatcher.cpp",
      "src/frontend/StereoMatchingParams.cpp",
      "src/frontend/StereoVisionImuFrontend.cpp",
      "src/frontend/Tracker.cpp",
      "src/frontend/UndistorterRectifier.cpp",
      "src/frontend/VisionImuFrontend.cpp",
      "src/frontend/VisionImuFrontendModule.cpp",
      "src/frontend/VisionImuFrontendParams.cpp",
      "src/frontend/VisionImuTrackerParams.cpp",
      "src/imu-frontend/ImuFrontend.cpp",
      "src/imu-frontend/ImuFrontendParams.cpp",
      "src/initial/CrossCorrTimeAligner.cpp",
      "src/initial/InitializationBackend.cpp",
      "src/initial/InitializationFromImu.cpp",
      "src/initial/OnlineGravityAlignment.cpp",
      "src/initial/TimeAlignerBase.cpp",
      "src/logging/Logger.cpp",
      "src/loopclosure/FrameCache.cpp",
      "src/loopclosure/LcdModule.cpp",
      "src/loopclosure/LcdOutputPacket.cpp",
      "src/loopclosure/LcdThirdPartyWrapper.cpp",
      "src/loopclosure/LoopClosureDetector.cpp",
      "src/loopclosure/LoopClosureDetectorParams.cpp",
      "src/mesh/Mesh.cpp",
      "src/mesh/Mesher.cpp",
      "src/mesh/MesherFactory.cpp",
      "src/mesh/MesherModule.cpp",
      "src/mesh/MeshOptimization.cpp",
      "src/pipeline/MonoImuPipeline.cpp",
      "src/pipeline/Pipeline.cpp",
      "src/pipeline/Pipeline-definitions.cpp",
      "src/pipeline/PipelineModule.cpp",
      "src/pipeline/PipelineParams.cpp",
      "src/pipeline/PipelinePayload.cpp",
      "src/pipeline/QueueSynchronizer.cpp",
      "src/pipeline/RgbdImuPipeline.cpp",
      "src/pipeline/StereoImuPipeline.cpp",
      "src/playground/EurocPlayground.cpp",
      "src/utils/FilesystemUtils.cpp",
      "src/utils/GtsamPrinting.cpp",
      "src/utils/Histogram.cpp",
      "src/utils/Statistics.cpp",
      "src/utils/ThreadsafeImuBuffer.cpp",
      "src/utils/ThreadsafeOdometryBuffer.cpp",
      "src/utils/UtilsGeometry.cpp",
      "src/utils/UtilsNumerical.cpp",
      "src/utils/UtilsOpenCV.cpp",
      "src/visualizer/Display.cpp",
      "src/visualizer/Display-definitions.cpp",
      "src/visualizer/DisplayFactory.cpp",
      "src/visualizer/DisplayModule.cpp",
      "src/visualizer/DisplayParams.cpp",
      "src/visualizer/OpenCvDisplay.cpp",
      "src/visualizer/OpenCvDisplayParams.cpp",
      "src/visualizer/OpenCvVisualizer3D.cpp",
      # "src/visualizer/PangolinDisplay.cpp",
      "src/visualizer/Visualizer3D.cpp",
      "src/visualizer/Visualizer3DFactory.cpp",
      "src/visualizer/Visualizer3DModule.cpp",
  ],
  deps = [
      "@com_github_google_glog//:glog",
      "@com_github_gflags_gflags//:gflags",
      "@opencv",
      "@opengv",
      "@gtsam",
      "@gtsam//:gtsam_unstable",
      "@dbow2",
      "@kimera_rpgo",
      ":triangle",
  ],
  strip_include_prefix = "include",
  visibility = ["//visibility:public"],
)

cc_binary(
  name = "stereoVIOEuroc",
  srcs = ["examples/KimeraVIO.cpp"],
  deps = [
    ":kimera_vio",
  ]
)
